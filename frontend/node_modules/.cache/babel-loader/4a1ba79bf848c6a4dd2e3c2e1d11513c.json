{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\hp\\\\Desktop\\\\social-media-au3\\\\frontend\\\\src\\\\components\\\\app.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport NavBar from './navbar';\nimport Profile from './profile';\n\nconst axios = require('axios');\n\nfunction App() {\n  const [userData, setUserData] = useState({});\n  const history = useHistory();\n  console.log(history);\n  useEffect(() => {\n    if (history.action === \"POP\") {\n      history.push(\"/sign\");\n    }\n\n    if (localStorage.getItem('user')) {\n      axios.get(`/userinfo/${JSON.parse(localStorage.getItem('user')).email}`, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('user')).token\n        }\n      }).then(res => {\n        setUserData(res.data);\n      }).catch(err => {\n        localStorage.clear('user');\n        history.push(\"/sign\");\n      });\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"body\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(NavBar, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/app/profile\",\n    component: () => React.createElement(Profile, {\n      data: userData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["c:/Users/hp/Desktop/social-media-au3/frontend/src/components/app.js"],"names":["React","useState","useEffect","Route","Switch","useHistory","NavBar","Profile","axios","require","App","userData","setUserData","history","console","log","action","push","localStorage","getItem","get","JSON","parse","email","headers","token","then","res","data","catch","err","clear"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,UAAxB,QAA0C,kBAA1C;AAEA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AAEA,SAASC,GAAT,GAAe;AAEX,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAMY,OAAO,GAAGR,UAAU,EAA1B;AACAS,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AAEAX,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGW,OAAO,CAACG,MAAR,KAAmB,KAAtB,EAA6B;AACzBH,MAAAA,OAAO,CAACI,IAAR,CAAa,OAAb;AACH;;AACD,QAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAH,EAAiC;AAC7BX,MAAAA,KAAK,CAACY,GAAN,CAAW,aAAYC,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCI,KAAM,EAAtE,EAAyE;AACrEC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,2BAAiB,YAAYH,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,EAAyCM;AAFjE;AAD4D,OAAzE,EAMCC,IAND,CAMMC,GAAG,IAAI;AACTf,QAAAA,WAAW,CAACe,GAAG,CAACC,IAAL,CAAX;AACH,OARD,EASCC,KATD,CASOC,GAAG,IAAI;AACVZ,QAAAA,YAAY,CAACa,KAAb,CAAmB,MAAnB;AACAlB,QAAAA,OAAO,CAACI,IAAR,CAAa,OAAb;AACH,OAZD;AAaH;AACJ,GAnBQ,EAmBN,EAnBM,CAAT;AAqBA,SACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,cAAlB;AAAiC,IAAA,SAAS,EACtC,MAAM,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAEN,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CAFJ,CADJ;AAYH;;AAED,eAAeD,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Route, Switch, useHistory } from 'react-router-dom'\r\n\r\nimport NavBar from './navbar'\r\nimport Profile from './profile'\r\n\r\nconst axios = require('axios')\r\n\r\nfunction App() {\r\n\r\n    const [userData, setUserData] = useState({});\r\n    const history = useHistory();\r\n    console.log(history);\r\n\r\n    useEffect(() => {\r\n        if(history.action === \"POP\") {\r\n            history.push(\"/sign\");\r\n        }\r\n        if(localStorage.getItem('user')) {\r\n            axios.get(`/userinfo/${JSON.parse(localStorage.getItem('user')).email}`, {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem('user')).token\r\n                }\r\n            })\r\n            .then(res => {\r\n                setUserData(res.data);\r\n            })\r\n            .catch(err => {\r\n                localStorage.clear('user');\r\n                history.push(\"/sign\");\r\n            });\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"body\">\r\n            <NavBar/>\r\n            <div>\r\n                <Switch>\r\n                    <Route exact path=\"/app/profile\" component={\r\n                        () => <Profile data={userData}/>\r\n                    }/>\r\n                </Switch>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}